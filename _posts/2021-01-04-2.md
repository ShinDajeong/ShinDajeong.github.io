---
layout: post
title: '[데이터베이스] 데이터베이스 고급 기능'
date: 2021-01-04 18:49:00
description: '트랜잭션, 병행제어, 무결성, 보안, 분산 데이터베이스'
---

#### 트랜잭션

1. 트랜잭션의 정의

   - 데이터베이스의 상태를 변환시키는 하나의 논리적 기능을 수행하기 위한 작업의 단위 또는 한꺼번에 수행되어야 할 인련의 연산
   - 병행 제어 및 회복 작업 시 처리되는 작업의 논리적 단위
   - 하나의 트랜잭션은 Commit 되거나 Rollback 된다

2. 트랜잭션 특징

   - 데이터의 무결성을 보장하기 위해 가져야할 특성
   - 원자성 : 트랜잭션의 연산은 데이터베이스에 모두 반영되도록 완료(커밋)되든지 전혀 반영되지 않도록 복구(롤백)되어야 함
   - 일관성 : 트랜잭션이 그 실행을 성공적으로 완료하면 언제나 일관성있는 데이터베이스 상태로 변환한다
   - 독립성 : 둘 이상의 트랜잭션이 동시에 병행 실행되는 경우, 어느 하나의 트랜잭션 실행 시 다른 트랜잭션의 연산이 끼 어들 수 없다
   - 영속성 : 성공적으로 완료된 트랜잭션의 결과는 영구적으로 반영되어야 한다

3. Commit, Rollback 연산

   - Commit 연산 : 한개의 논리적 단위(트랜잭션)에 대한 작업이 성공적으로 끝났고, 데이터베이스가 일관된 상태에 있을때, 트랜잭션이 행한 갱신 연산이 완료된 것을 관리자에게 알려줌
   - Rollback 연산 : 하나의 트랜잭션 처리가 비정상적으로 종료되어 일관성을 깨뜨렸을 때, 트랜잭션의 원자성을 구현하기 위해 트랜잭션이 행한 모든 연산을 취소하는 연산

<br>

#### 병행제어

1. 병행제어의 정의 : 다중 프로그램의 이점을 활용하여 동시에 여러 개의 트랜잭션을 병행수행할 때, 데이터베이스의 일관성을 파괴하지 않도록 트랜잭션 간의 상호작용을 제어하는 것

2. 병행제어의 목적 : 데이터베이스 공유 최대화, 시스템 활용도 최대화, 데이터베이스 일관성 유지, 응답시간 최소화

3. 병행제어 문제점

   - 트랜잭션들이 데이터베이스에 동시 접근 할 경우 다음과 같은 문제점 발생
   - 갱신 분실 : 두 개 이상의 트랜잭션이 같은 자료 공유하여 갱신할 때 결과의 일부가 없어짐
   - 비완료 의존성 : 트랜잭션 수행이 실패 후 회복 전 다른 트랜잭션이 실패한 갱신 결과를 참조
   - 모순성 : 두 개의 트랜잭션이 병행 수행 할 때 원치않는 자료를 이용함으로써 발생
   - 연쇄 복귀 : 병행수행되던 트랜잭션들 중 어느 하나에 문제가 생겨 롤백하는 경우 다른 트랜잭션도 함께 롤백

4. 병행제어 기법의 종류
   - 로킹(Locking) : 트랜잭션이 어떤 로킹 단위를 액세스 하기 전 Lock(잠금)을 요청하여 Lock이 허락되어야만 그 로킹 단위 액세스가 가능하도록 함 - 로킹의 종류 - 2단계 로킹 규약 : 로크 요청과 해제 요청을 2단계로 실시 - 타임 스탬프 규약 : 트랜잭션 간의 처리 순서를 미리 선택하여 부여된 시간에 따라 작업 수행 (교착상태가 발생하지 않음) - 최적 병행수행 : 트랜잭션이 Read Only일 경우 병행제어 기법을 사용하지 않고 실행
     <br>

#### 무결성

- 무결성이란 데이터베이스에 저장된 데이터 값과 현실 세계의 실제 값이 일치하는 _정확성_

1. 무결성을 유지하는 방법

   - 검증 단계를 거치도록 통제
   - 검증 프로그램이 무결성을 검증하기 위해 무결성 규정 사용
   - 규정 이름 : 무결성 규정 참조 시 사용하는 식별자
   - 트리거 조건 : 트랜잭션의 접근 유청 및 데이터, 검사할 시기 명시
   - 프레디킷(제약조건) : 무결성을 위한 검사 조건
   - 위반 조치 : 무결성 위반이 발견되었을 때 처리할 조치

2. 무결성 종류

   - 널 무결성 : 특정 속성 값이 Null이 될 수 없음
   - 고유 무결성 : 각 튜플이 갖는 속성 값이 서로 달라야 함
   - 참조 무결성 : 외래키 값은 Null이거나 참조 릴레이션의 기본키값과 동일
   - 도메인 무결성 : 특정 속성 값이 그 속성에 정의된 도메인에 속한 값이여야 함
   - 키 무결성 : 하나의 테이블에는 적어도 하나의 키가 존재
   - 관계 무결성 : 한 튜플의 삽입 가능 여부 또는 한 릴레이션과 다른 릴레이션 튜플들 사이의 관계에 대한 적정설 여부를 지정
   - 개체 무결성 : 기본키를 구성하는 어떤 속성도 Null이나 중복값을 가질 수 없음

  <br>

#### 보안

- 데이터베이스의 일부분 또는 전체에 대해서 권한이 없는 사용자가 액세스하는 것을 금지하기 위해 사용되는 기술
- GRANT / REVOKE 기법
  - DBA가 명령으로 권한을 부여하고 취소시키는 방법
  - GRANT : 권한 부여 -> GRANT 사용자 등급 TO 사용자 ID 리스트 / GRANT 권한 ON 데이터 개체 TO 사용자
  - REVOKE : 권한 취소 -> REVOKE 사용자 등급 FROM 사용자 ID 리스트 / REVOKE 권한 ON 데이터 개체 FROM 사용자

<br>

#### 분산 데이터베이스

- 논리적으로는 하나의 시스템에 속하지만, 물리적으로 네트워크를 통해 연결된 여러 개의 컴퓨터 사이트에 분산되어 있는 데이터베이스

1. 분산 데이터베이스 목표
   - 위치 투명성 : 접근하려는 데이터베이스의 실제 위치를 알 필요 없이 명칭만으로 액세스할 수 있음
   - 중복 투명성 : 동일 데이터가 여러 곳에 중복되어 있더라도 사용자는 마치 하나의 데이터만 존재하는 것처럼 사용
   - 병행 투명성 : 다수의 트랜잭션이 동시에 실현되더라도 결과는 영향을 받지 않는다
   - 장애 투명성 : 트랜잭션, DBMS, 네트워크, 컴퓨터 장애에도 불구하고 트랜잭션을 정확히 처리
